<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Graph editor</title>
	<link rel="stylesheet" href="graph.css" media="screen">
	<link rel="stylesheet" href="../dijit/themes/claro/claro.css" media="screen">
</head>
<body class="claro">

    <div class="dijitHidden">
    <div data-dojo-type="dijit/Dialog" data-dojo-props="title:'Введите имя'" id="locsavedlg">
        <select data-dojo-type="dijit/form/ComboBox" id="lsavename" name="fruit">
            <option>A</option>
            <option selected>Scheme</option>
            <option>C</option>
        </select>
        <button onclick="alert(registry.byId('lsavename').get('value'), hideDialog()">Сохранить</button>
        <button onclick="hideDialog()">Отмена</button>
    </div>
</div>
	<div id="mainMenu" data-dojo-type="dijit/MenuBar">
		<div id="file" data-dojo-type="dijit/PopupMenuBarItem">
			<span>Файл</span><div id="fileMenu" data-dojo-type="dijit/Menu">
                        <div id="new" data-dojo-type="dijit/MenuItem" onclick="Main.CreateMenu('file', 'test','test',null);">Новый</div>
                        <div data-dojo-type="dijit/MenuSeparator"></div>
                        <div id="saveloc" data-dojo-type="dijit/MenuItem" onclick="showDialog()">Сохранить в браузере</div>
                        <div id="loadloc" data-dojo-type="dijit/MenuItem" onclick="LocDB.Load('GraphDB','Scheme')">Загрузить из браузера</div>
		</div></div>
		<div id="edit" data-dojo-type="dijit/PopupMenuBarItem">
			<span>Правка</span><div id="editMenu" data-dojo-type="dijit/Menu">
			<div id="delete" data-dojo-type="dijit/MenuItem" onclick="Main.Delete()">Удалить</div>
		</div></div>
		<div id="create" data-dojo-type="dijit/PopupMenuBarItem">
			<span>Создать</span><div id="createMenu" data-dojo-type="dijit/Menu">
                        <div id="point" data-dojo-type="dijit/MenuItem">Точку</div>
                        <div id="line" data-dojo-type="dijit/MenuItem" onclick="CLine.OnCreate()">Линию</div>
                        <div id="arc" data-dojo-type="dijit/MenuItem" onclick="onarc()">Дугу</div>
			<div data-dojo-type="dijit/MenuSeparator"></div>
			<div id="arrow" data-dojo-type="dijit/MenuItem" onclick="onarrow()">Стрелку</div>
			<div id="block" data-dojo-type="dijit/MenuItem">Блок</div>
			</div>
		</div>
	</div>
	<script src="../dojo/dojo.js" data-dojo-config="isDebug:1, async:1"></script>
	<script>
        require([
            "dojo/dom",
            "dojo/parser",
            "dijit/registry",
            "dijit/WidgetSet", // for registry.byClass
            "dijit/Dialog",
            "dijit/form/ComboBox",
            "dijit/Menu",
            "dijit/MenuItem", 
            "dijit/MenuBar",
            "dijit/MenuBarItem",
            "dijit/MenuSeparator",
            "dijit/PopupMenuBarItem",
            "dojo/domReady!"
        ], function(dom, parser, registry){
			// a menu item selection handler
			var onItemSelect = function(event){
				//dom.byId("lastSelected").innerHTML = this.get("label");
			};
            window.showDialog = function() {
                registry.byId('locsavedlg').show();
            }
            // Hide the dialog
            window.hideDialog = function() {
                registry.byId("terms").hide();
            }

			parser.parse();

			var setClickHandler = function(item){
				item.on("click", onItemSelect);
			};

			registry.byClass("dijit.MenuItem").forEach(setClickHandler);
			registry.byClass("dijit.MenuBarItem").forEach(setClickHandler);
		});
	</script>
<br>
<script src="main.js"></script>
<script src="menu.js"></script>
<script src="navi.js"></script>
<script src="grid.js"></script>
<script src="pnl.js"></script>
<script src="arrow.js"></script>
<script src="rect.js"></script>
<script src="arcs.js"></script>
<script src="user.js"></script>
<script src="db.js"></script>
<canvas id='canvas' width="800" height="600" oncontextmenu="Main.Redraw()">Обновите браузер</canvas>
<textarea id="Memo"></textarea>
<script>Main.Init()</script>
</body>
</html>
